"use strict";(self.webpackChunkcode_cactu_website=self.webpackChunkcode_cactu_website||[]).push([[944],{5482:function(e,i,a){a.r(i),a.d(i,{default:function(){return ne}});var t=a(3614),n=a(2492),s=a(4783),r=a(2047),l=a(5893);function c(e){var i=e.children,a=e.fallback;return(0,l.jsx)(l.Fragment,{children:(0,r.ZP)()?i:a})}var o=a(5785),d=a(5861),u=a(4687),m=a.n(u),h=a(7294),p=a(1344),j=a(6018);var g=a(3771),f=a(3476),x=a(5698);function v(e){var i=e.className,a=e.children,t=e.justify,n=e.spaced,s=e.wrapping,r=y()[0],c=(0,x.Z)(t,{left:r.isJustifiedLeft,center:r.isJustifiedCenter,right:r.isJustifiedRight,"space-between":r.isJustifiedSpaceBetween}),o=(0,f.Z)(r.row,n&&r.isSpaced,s&&r.isWrapping,c,i);return(0,l.jsx)("div",{className:o,children:a})}var y=(0,j.R)((function(e){return{row:{display:"flex",flexDirection:"row",alignItems:"center","& > *":{margin:0}},isJustifiedLeft:{justifyContent:"left"},isJustifiedCenter:{justifyContent:"center"},isJustifiedRight:{justifyContent:"right"},isJustifiedSpaceBetween:{justifyContent:"space-between"},isSpaced:{gap:e.atoms.spacing.main},isWrapping:{flexWrap:"wrap"}}}));function w(e){var i=e.className,a=e.username,t=e.userId,n=e.avatarId;return(0,l.jsx)("img",{className:i,src:"https://cdn.discordapp.com/avatars/"+t+"/"+n+".webp?size=100",alt:a+"'s avatar"})}var b=a(9644),z=a(448),k=a(892);function N(e){var i=e.className,a=e.style,t=e.children,n=I()[0];return(0,l.jsx)("div",{className:(0,f.Z)(n.textContainer,i),style:a,children:t})}var I=(0,j.R)((function(e){return{textContainer:{"& > :first-child":{marginTop:0},"& > :last-child":{marginBottom:0},"& > *":{marginBottom:e.atoms.spacing.main}}}}));function C(e){var i=e.className,a=e.style,t=e.children,n=e.verticallJustify,s=e.width,r=e.narrow,c=Z()[0],o=!n||"top"==n,d=(0,x.Z)(n,{top:c.isVerticallyJustifiedTop,center:c.isVerticallyJustifiedCenter,bottom:c.isVerticallyJustifiedBottom}),u=(0,f.Z)(c.column,r&&c.isNarrow,s&&c.withWidth,d,i);return s&&(a||(a={}),/^\d+%$/.test(s)?a.flexGrow=Number(s.match(/\d+/)[0])/100:a.flexBasis=s),o?(0,l.jsx)(N,{className:u,style:a,children:t}):(0,l.jsx)("div",{className:u,style:a,children:(0,l.jsx)(N,{children:t})})}var Z=(0,j.R)((function(e){var i,a,t=e.atoms;return{column:(i={display:"block"},i[t.breakpoints.bigMobile.mediaQueryMax]={flexBasis:"100%"},i),isVerticallyJustifiedTop:{display:"flex",alignItems:"start"},isVerticallyJustifiedCenter:{display:"flex",alignItems:"center"},isVerticallyJustifiedBottom:{display:"flex",alignItems:"end"},isNarrow:{width:"max-content",flexGrow:0,flexBasis:"auto"},withWidth:(a={flexGrow:0},a[t.breakpoints.bigMobile.mediaQueryMax]={flexGrow:1},a)}}));function T(e){var i=e.children,a=e.className,t=R()[0];return(0,l.jsx)("div",{className:(0,f.Z)(t.surface,a),children:i})}var R=(0,j.R)((function(e){var i=e.mixins;return{surface:Object.assign({},i.surface)}})),P=a(7132);function B(e){var i=e.category,a=i.title,t=i.scale,n=(0,k.lh)().resolve,s=J()[0];return(0,l.jsx)(T,{className:s.popup,children:(0,l.jsxs)(C,{children:[(0,l.jsx)(P.ZP,{as:"h3",justify:"center",body:a}),(0,l.jsx)(v,{spaced:!0,justify:"center",children:Array.from({length:t},(function(e,i){return(0,l.jsxs)("label",{children:[(0,l.jsx)("input",{type:"radio",hidden:!0}),(0,l.jsx)(b.Z,{variant:"outlined",onClick:function(){return n(i)},body:i})]},i)}))})]})})}var J=(0,j.R)({popup:{display:"flex",alignItems:"center",justifyContent:"center",width:"100vw",height:"100vh",zIndex:1e3,backdropFilter:"blur( 3px )"},closeButton:{justifyContent:"center",width:"100%"}});function M(e){var i=e.category,a=e.score,t=e.notConsidered,n=e.onUpdateVote,s=S()[0],r=(0,g.Sp)().createPopup;console.log({notConsidered:t});var c=(0,f.Z)(s.voteTile,t&&s.notConsidered);return(0,l.jsxs)(b.Z,{variant:"outlined",className:c,onClick:function(){return r((0,l.jsx)(B,{category:i})).then((function(e){return n(i.name,e)}))},children:[(0,l.jsx)("span",{className:s.score,children:a}),(0,l.jsx)("span",{className:s.title,children:i.title})]})}var S=(0,j.R)((function(e){var i=e.atoms;return{voteTile:{display:"flex",flexDirection:"column",alignItems:"center",borderWidth:1,padding:0,width:45},notConsidered:{"--color":i.colors.rest.red,color:"var( --color )",borderColor:"var( --color )","&:hover":{"--color":i.colors.primary.main}},score:{color:"var( --color, "+i.colors.primary.main+" )"},title:{fontSize:"0.5em"}}}));function W(e){var i=e.className,a=e.children,t=e.body,n=e.highlight;a||(a=t);var s=V()[0],r=(0,f.Z)(n&&s.isHighlighted,i);return(0,l.jsx)("span",{className:r,children:a})}var V=(0,j.R)((function(e){return{isHighlighted:{color:e.atoms.colors.primary.main}}})),E=[{name:"subject",scale:3,title:"Temat"},{name:"impressions",scale:3,title:"Wrażenia"},{name:"realisation",scale:4,title:"Realizacja"},{name:"readability",scale:3,title:"Czytelność"}];(0,j.R)((function(e){return{help:{color:e.atoms.colors.primary.main}}}));var L=a(3366),A=["children","body","onClick"];function D(e){var i=e.children,a=e.body,t=e.onClick,n=(0,L.Z)(e,A);i||(i=a);var s=(0,k.lh)();if(!s)throw new Error("Popup button cannot be used outside popup");return(0,l.jsx)(b.Z,Object.assign({},n,{onClick:function(){s.resolve(null==t?void 0:t())},children:i}))}function O(){var e=U()[0];return(0,l.jsxs)(T,{className:e.popup,children:[(0,l.jsxs)("dl",{className:e.defList,children:[(0,l.jsx)("dt",{className:e.listTitle,children:(0,l.jsx)(W,{highlight:!0,children:"Temat"})}),(0,l.jsxs)("dd",{className:e.listValue,children:[(0,l.jsx)("p",{children:"Zgodność z tematem"}),(0,l.jsxs)("ol",{className:e.list,children:[(0,l.jsxs)("li",{className:e.listItem,children:[(0,l.jsx)(W,{highlight:!0,children:"0"})," - Temat nie jest dostrzegalny, lub jest niezwykle szczątkowy"]}),(0,l.jsxs)("li",{className:e.listItem,children:[(0,l.jsx)(W,{highlight:!0,children:"1"})," - Temat występuje przykładowo w tle, okala produkcję, gra jakoś nawiązuje do tematu"]}),(0,l.jsxs)("li",{className:e.listItem,children:[(0,l.jsx)(W,{highlight:!0,children:"2"})," - Temat został zaimplementowany w mechanikach dzieła, mechaniki są spójne z tematem a ich podmiana zupełnie by zmieniła produkt"]})]})]}),(0,l.jsx)("dt",{className:e.listTitle,children:(0,l.jsx)(W,{highlight:!0,children:"Wrażenia"})}),(0,l.jsxs)("dd",{className:e.listValue,children:[(0,l.jsx)("p",{children:"Ogólne wrażenia. Wywołana ciekawość, chęć zobaczenia kontynuacji, element zaskoczenia, chęć powtarzania gry"}),(0,l.jsxs)("ol",{className:e.list,children:[(0,l.jsxs)("li",{className:e.listItem,children:[(0,l.jsx)(W,{highlight:!0,children:"0"})," - Monotonia, nuda, brak zaciekawienia odbiorcy, niechęć do przejścia całości lub przejscie z trudem"]}),(0,l.jsxs)("li",{className:e.listItem,children:[(0,l.jsx)(W,{highlight:!0,children:"1"})," - Powiewa deliaktną nudą, fajne ale nie rób więcej"]}),(0,l.jsxs)("li",{className:e.listItem,children:[(0,l.jsx)(W,{highlight:!0,children:"2"})," - Nic dodać nic ująć -- wartość domyślna, zaznacz jeśli nic szczególnie nie wpłynęło na Twoje wrażenia"]}),(0,l.jsxs)("li",{className:e.listItem,children:[(0,l.jsx)(W,{highlight:!0,children:"3"})," - Sympatyczna produkcja, wywołała przyjemne odczucia lub zachęciła do ponownej gry. Być może zagrałbyś w kontynuację lub wersję 2.0"]}),(0,l.jsxs)("li",{className:e.listItem,children:[(0,l.jsx)(W,{highlight:!0,children:"4"})," - Chcesz więcej, nawet jeśli było coś nie tak to nie ma to zestawienia z plusami. Bardzo przyjemna gra"]})]})]}),(0,l.jsx)("dt",{className:e.listTitle,children:(0,l.jsx)(W,{highlight:!0,children:"Realizacja"})}),(0,l.jsxs)("dd",{className:e.listValue,children:[(0,l.jsx)("p",{children:"Spójność produktu, dobrze dobrane wizualia"}),(0,l.jsxs)("ol",{className:e.list,children:[(0,l.jsxs)("li",{className:e.listItem,children:[(0,l.jsx)(W,{highlight:!0,children:"0"})," - Bez składu i ładu -- mało co do siebie pasuje."]}),(0,l.jsxs)("li",{className:e.listItem,children:[(0,l.jsx)(W,{highlight:!0,children:"1"})," - Niektóre elementy do siebie nie pasują, całość nie współgra najlepiej"]}),(0,l.jsxs)("li",{className:e.listItem,children:[(0,l.jsx)(W,{highlight:!0,children:"2"})," - Nic dodać nic ująć -- wartość domyślna, zaznacz jeśli nic szczególnie nie wpłynęło na Twoje wrażenia"]}),(0,l.jsxs)("li",{className:e.listItem,children:[(0,l.jsx)(W,{highlight:!0,children:"3"})," - Dobrze dobrane elementy"]}),(0,l.jsxs)("li",{className:e.listItem,children:[(0,l.jsx)(W,{highlight:!0,children:"4"})," - Wszystko świetnie ze sobą współgra razem tworząc jedność"]})]})]}),(0,l.jsx)("dt",{className:e.listTitle,children:(0,l.jsx)(W,{highlight:!0,children:"Czytelność"})}),(0,l.jsxs)("dd",{className:e.listValue,children:[(0,l.jsx)("p",{children:"Czytelność i jasność zasad. Czy wiadomo co robić (jeśli błądzisz, czy wiesz o tym że czegoś szukasz)"}),(0,l.jsxs)("ol",{className:e.list,children:[(0,l.jsxs)("li",{className:e.listItem,children:[(0,l.jsx)(W,{highlight:!0,children:"0"})," - Niczego nie zrozumiałeś. Produkt niczego nie tłumaczy i bez pomocy autora nic nie zrobisz"]}),(0,l.jsxs)("li",{className:e.listItem,children:[(0,l.jsx)(W,{highlight:!0,children:"1"})," - Autor musi wyjaśnić drobne kwestie ale poza prostymi dopowiedzeniami produkt względnie się tłumaczy"]}),(0,l.jsxs)("li",{className:e.listItem,children:[(0,l.jsx)(W,{highlight:!0,children:"2"})," - Nikt nic nie musi dopowiadać. Jeśli tak się dzieje, to tylko w sytuacji rzeczy celowo ukrytych"]})]})]})]}),(0,l.jsx)(D,{className:e.closeButton,variant:"outlined",body:"Zamknij"})]})}var U=(0,j.R)((function(e){var i=e.atoms;return{popup:{width:"100vw",height:"100vh",overflow:"auto",zIndex:1e3,backdropFilter:"blur( 10px )"},defList:{padding:0},listTitle:{marginTop:2*i.spacing.main},listValue:{marginLeft:i.spacing.main},list:{paddingLeft:i.spacing.main,listStyle:"none",textIndent:-i.spacing.main},listItem:{margin:i.spacing.main+"px 0"},closeButton:{justifyContent:"center",width:"100%"}}}));function Q(e){var i=e.game,a=e.onUpdate,t=H()[0],n=(0,h.useState)(i),s=n[0],r=n[1],c=(0,g.Sp)().createPopup,o=(0,h.useRef)(!0),d=s.filename,u=s.user,m=s.votes,p=Object.values(m).includes(null),j=function(e,i){r((function(a){var t;return Object.assign({},a,{votes:Object.assign({},a.votes,(t={},t[e]=i,t))})}))};return(0,h.useEffect)((function(){o.current?o.current=!1:null==a||a(s)}),[s]),(0,l.jsxs)("div",{className:t.row,children:[(0,l.jsx)(w,{className:t.avatar,userId:u.id,avatarId:u.avatar,username:u.username}),(0,l.jsxs)("div",{className:t.userData,children:[(0,l.jsxs)("div",{children:["Praca użytkownika ",u.username]}),(0,l.jsx)(v,{spaced:!0,justify:"center",className:t.votes,children:E.map((function(e){var i;return(0,l.jsx)(M,{notConsidered:p,category:e,score:null!==(i=null==m?void 0:m[e.name])&&void 0!==i?i:"-",onUpdateVote:j},e.name)}))})]}),(0,l.jsx)(b.Z,{className:t.description,variant:"outlined",onClick:function(){return c((0,l.jsx)(O,{}))},body:"Opis kategorii"}),(0,l.jsx)(b.Z,{className:t.download,variant:"outlined",onClick:function(){return e=(0,z.R)()+"/cactujam/games/"+d,(i=document.createElement("a")).href=e,i.download="",void i.click();var e,i},body:"Pobierz"})]})}var H=(0,j.R)((function(e){var i,a,t,n=e.atoms;return{row:(i={display:"grid",gridTemplate:'"avatar data desc down" / 50px 1fr max-content',alignItems:"center",gap:n.spacing.main},i[n.breakpoints.bigMobile.mediaQueryMax]={gridTemplate:'"avatar desc" "data data" / 1fr max-content'},i),jamProductionsList:{width:n.sizes.columnWidth,marginTop:n.spacing.main},avatar:{gridArea:"avatar",width:50,height:50,borderRadius:"50%"},userData:{gridArea:"data",display:"flex",flexDirection:"column",alignItems:"center",gap:n.spacing.main},votes:(a={},a[n.breakpoints.mobile.mediaQuery]={gap:n.spacing.main/2},a),description:{gridArea:"desc"},download:(t={gridArea:"down"},t[n.breakpoints.bigMobile.mediaQueryMax]={display:"none"},t)}})),F=a(3026),G=a(953);function _(){var e;return null===(e=(0,G.Z)())||void 0===e?void 0:e.localStorage.getItem(r.Cm)}var K=F.Z.createMiddlewaredHttp((function(e){var i=_();return e.uri=(0,z.U)()+e.uri,i&&(e.headers||(e.headers={}),e.headers.Authorization="Bearer "+i),e}));function $(){var e=(0,p.Z)(),i=e[0],a=e[1],t=a.push,n=a.clear,s=q()[0],r=function(){var e=(0,d.Z)(m().mark((function e(){var i,a,s,r,l,c,d;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([K.get("/cactujam/games"),K.get("/cactujam/games/votes")]);case 2:if(i=e.sent,a=i[0],s=i[1],r=[a[0],s[0]],c=r[1],null!=(l=r[0])&&l.games&&null!=c&&c.votes){e.next=8;break}return e.abrupt("return");case 8:d=l.games.map((function(e){var i;return Object.assign({},e,{votes:null!==(i=c.votes.find((function(i){return i.gameId===e.id})))&&void 0!==i?i:{impressions:null,readability:null,realisation:null,subject:null}})})),n(),t.apply(void 0,(0,o.Z)(d));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),c=function(){var e=(0,d.Z)(m().mark((function e(i){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.put("/cactujam/games/votes",{gameId:i.id,votes:i.votes});case 2:r();case 3:case"end":return e.stop()}}),e)})));return function(i){return e.apply(this,arguments)}}();return(0,h.useEffect)((function(){r()}),[]),(0,l.jsx)(T,{className:s.jamProductionsList,children:i.map((function(e){return(0,l.jsx)(Q,{game:e,onUpdate:c},e.filename)}))})}var q=(0,j.R)((function(e){var i=e.atoms;return{jamProductionsList:{width:i.sizes.columnWidth,marginTop:i.spacing.main},avatar:{width:50,height:50,borderRadius:"50%"}}})),X=a(2775),Y=a(1279),ee=a(1597),ie=a(6711);function ae(){var e=te(),i=e[0],a=e[1].atoms,t=(0,n.Aw)().user,s=function(){var e=(0,d.Z)(m().mark((function e(){var i,a,t;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=null===(i=(0,G.Z)())||void 0===i?void 0:i.localStorage,t=_(),a&&t){e.next=4;break}return e.abrupt("return");case 4:return a.removeItem(r.Pv),a.removeItem(r.Cm),e.next=8,fetch((0,z.U)()+"/discord/integrate",{method:"DELETE",headers:{Authorization:"Bearer "+t}});case 8:(0,ee.navigate)("/jam");case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),c=function(){var e=(0,d.Z)(m().mark((function e(){var i,a,t,n;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){var i=document.createElement("input");i.type="file",i.accept=".zip",i.click(),i.addEventListener("change",(function(){return e(i.files)}))}));case 2:return a=e.sent,t=new FormData,n=_(),a&&t.append("gameZip",a[0]),n&&t.append("sessionToken",n),e.next=9,fetch((0,z.U)()+"/cactujam/games",{method:"POST",body:t}).then((function(e){return e.json()}));case 9:e.sent.success&&(null===(i=(0,G.Z)())||void 0===i||i.location.reload());case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return t?(0,l.jsxs)(T,{className:i.integrationUserHeader,children:[(0,l.jsx)(w,{className:i.avatar,userId:t.id,avatarId:t.avatar,username:t.username}),(0,l.jsxs)(C,{children:[(0,l.jsx)(P.ZP,{children:t.username+"#"+t.discriminator}),(0,l.jsx)(ie.Z,{onClick:s,color:a.colors.rest.red,icon:X.lE7,body:"Wyloguj się"})]}),(0,l.jsxs)(C,{className:i.upload,children:[(0,l.jsx)(P.ZP,{children:"Załaduj plik ze swoją produkcją (zip)"}),(0,l.jsx)(ie.Z,{onClick:c,color:a.colors.rest.green,icon:Y.IEK,body:"Załaduj plik"})]})]}):null}var te=(0,j.R)((function(e){var i,a,t=e.atoms;return{integrationUserHeader:(i={display:"flex",gap:t.spacing.main,alignItems:"center",width:t.sizes.columnWidth},i[t.breakpoints.bigMobile.mediaQueryMax]={flexDirection:"column",textAlign:"center"},i),avatar:{borderRadius:"50%",border:"2px solid "+t.colors.rest.green,padding:2},upload:(a={},a[t.breakpoints.bigMobile.mediaQueryMax]={display:"none"},a)}}));function ne(){return(0,l.jsx)(t.Z,{flow:"column",children:(0,l.jsxs)(n.pP,{children:[(0,l.jsx)(c,{fallback:(0,l.jsx)(s.Z,{}),children:(0,l.jsx)(ae,{})}),(0,l.jsx)($,{})]})})}}}]);
//# sourceMappingURL=component---src-pages-jam-tsx-4cf4d3334058060ebf47.js.map